#!/usr/bin/env python

import re
import sys

TOP = r"""// Part of Measurement Kit <https://measurement-kit.github.io/>.
// Measurement Kit is free software under the BSD license. See AUTHORS
// and LICENSE for more information on the copying conditions.

/*-
 *  __      __  _____ __________  _______  .___ _______    ________
 * /  \    /  \/  _  \\______   \ \      \ |   |\      \  /  _____/
 * \   \/\/   /  /_\  \|       _/ /   |   \|   |/   |   \/   \  ___
 *  \        /    |    \    |   \/    |    \   /    |    \    \_\  \
 *   \__/\  /\____|__  /____|_  /\____|__  /___\____|__  /\______  /
 *        \/         \/       \/         \/            \/        \/
 *
 * Autogenerated by measurement-kit/ffi-tools; DO NOT EDIT!
 *
 * See https://github.com/measurement-kit/ffi-tools for more information.
 */
"""

def main():
    """ Main function """
    pattern = "^// --->8 ([A-Za-z/]+.java) 8<---$"
    current_filep = None
    for line in sys.stdin:
        line = line.rstrip()
        match = re.match(pattern, line)
        if match:
            current_filep = open(match.group(1), "w")
            current_filep.write("%s" % TOP)
            continue
        if not current_filep:
            continue
        current_filep.write("%s\n" % line)

if __name__ == "__main__":
    main()
