#!/bin/sh
set -e

python src/main/spec/nettest.py src/main/template/nettest/nettest.hpp.j2 \
    | clang-format - > include/measurement_kit/nettest/nettest.hpp

python src/main/spec/nettest.py src/main/template/nettest/nettest.java.j2 \
    > src/main/java/io/ooni/mk/nettest.java

python src/main/spec/nettest.py src/main/template/ffi/nettest.hpp.j2 \
    | clang-format - > include/measurement_kit/ffi/nettest.hpp

python src/main/spec/nettest.py src/main/template/ffi/README.md.j2 \
    > include/measurement_kit/ffi/README.md
